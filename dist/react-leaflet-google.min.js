!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("google-maps"),require("react"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["google-maps","react","react-leaflet"],e):"object"==typeof exports?exports.ReactLeaflet=e(require("google-maps"),require("react"),require("react-leaflet")):t.ReactLeaflet=e(t.GoogleMapsLoader,t.React,t[void 0])}(this,function(t,e,i){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleLayer=void 0;var n=i(1),r=o(n);e.GoogleLayer=r.default},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){var i={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o]);return i}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),h=function t(e,i,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},p=i(4),u=(o(p),i(5)),c=(i(2),function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),l(e,[{key:"componentWillMount",value:function(){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillMount",this).call(this);var t=this.props;t.map,t.googlekey,t.maptype,t.asclientid,n(t,["map","googlekey","maptype","asclientid"]);this.leafletElement=new L.gridLayer.googleMutant(this.props)}},{key:"componentDidUpdate",value:function(t){var e=this.props,i=e.opacity,o=e.zIndex;i!==t.opacity&&this.leafletElement.setOpacity(i),o!==t.zIndex&&this.leafletElement.setZIndex(o)}}]),e}(u.GridLayer));c.propTypes={googlekey:p.PropTypes.string.isRequired,maptype:p.PropTypes.string,asclientid:p.PropTypes.bool},e.default=c},function(t,e,i){"use strict";var o=i(3);o.VERSION="3.18",L.GridLayer.GoogleMutant=L.GridLayer.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"satellite",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t);var e=this;t.asclientid?o.CLIENT=t.googlekey:o.KEY=t.googlekey,e._type=t.maptype||"SATELLITE",o.load(function(t){google=t,console.log("I just loaded google maps api"),e._ready=!0,e._initMutant(),e._update()}),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===e._type?2:1,this.createTile="hybrid"===e._type?this._createMultiTile:this._createSingleTile},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._ready&&(this._map=t,this._initMutant(),t.on("viewreset",this._reset,this),t.on("move",this._update,this),t.on("zoomend",this._handleZoomAnim,this),t.on("resize",this._resize,this),t._controlCorners.bottomright.style.marginBottom="20px",this._reset(),this._update())},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),t._container.removeChild(this._mutantContainer),this._mutantContainer=void 0,t.off("viewreset",this._reset,this),t.off("move",this._update,this),t.off("zoomend",this._handleZoomAnim,this),t.off("resize",this._resize,this),t._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(t){this.options.opacity=t,t<1&&L.DomUtil.setOpacity(this._mutantContainer,t)},setElementSize:function(t,e){t.style.width=e.x+"px",t.style.height=e.y+"px"},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._map.getContainer().appendChild(this._mutantContainer)),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer){this._mutantCenter=new google.maps.LatLng(0,0);var t=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:google.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=t,this.fire("spawned",{mapObject:t})}},_attachObserver:function(t){var e=new MutationObserver(this._onMutations.bind(this));e.observe(t,{childList:!0,subtree:!0})},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],o=0;o<i.addedNodes.length;++o){var n=i.addedNodes[o];n instanceof HTMLImageElement?this._onMutatedImage(n):n instanceof HTMLElement&&Array.prototype.forEach.call(n.querySelectorAll("img"),this._onMutatedImage.bind(this))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i,o,n=t.src.match(this._roadRegexp);if(n?(e={z:n[1],x:n[2],y:n[3]},this._imagesPerTile>1&&(t.style.zIndex=1),i=1):(n=t.src.match(this._satRegexp),n&&(e={x:n[1],y:n[2],z:n[3]}),i=0),e){var r=this._tileCoordsToKey(e);t.style.position="absolute",this._imagesPerTile>1&&(r+="/"+i),r in this._tileCallbacks&&this._tileCallbacks[r]?(this._tileCallbacks[r].pop()(t),this._tileCallbacks[r].length||delete this._tileCallbacks[r]):(o=t.parentNode,o&&(o.removeChild(t),o.removeChild=L.Util.falseFn),r in this._freshTiles?this._freshTiles[r].push(t):this._freshTiles[r]=[t])}else t.src.match(this._staticRegExp)&&(o=t.parentNode,o&&t.parentNode.replaceChild(L.DomUtil.create("img"),t))},_createSingleTile:function(t,e){var i=this._tileCoordsToKey(t);if(i in this._freshTiles){var o=this._freshTiles[i].pop();return this._freshTiles[i].length||delete this._freshTiles[i],L.Util.requestAnimFrame(e),o}var n=L.DomUtil.create("div");return this._tileCallbacks[i]=this._tileCallbacks[i]||[],this._tileCallbacks[i].push(function(t){return function(i){var o=i.parentNode;o&&(o.removeChild(i),o.removeChild=L.Util.falseFn),t.appendChild(i),e()}.bind(this)}.bind(this)(n)),n},_createMultiTile:function(t,e){var i=this._tileCoordsToKey(t),o=L.DomUtil.create("div");o.dataset.pending=this._imagesPerTile;for(var n=0;n<this._imagesPerTile;n++){var r=i+"/"+n;r in this._freshTiles?(o.appendChild(this._freshTiles[r].pop()),this._freshTiles[r].length||delete this._freshTiles[r],o.dataset.pending--):(this._tileCallbacks[r]=this._tileCallbacks[r]||[],this._tileCallbacks[r].push(function(t){return function(i){var o=i.parentNode;o&&(o.removeChild(i),o.removeChild=L.Util.falseFn),t.appendChild(i),t.dataset.pending--,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(o)))}return parseInt(o.dataset.pending)||L.Util.requestAnimFrame(e),o},_checkZoomLevels:function(){void 0!==this._map.getZoom()&&this._mutant.getZoom()!==this._map.getZoom()&&this._map.setZoom(this._mutant.getZoom())},_reset:function(){this._initContainer()},_update:function(){if(L.GridLayer.prototype._update.call(this),this._mutant){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e);var i=this._map.getZoom();void 0!==i&&this._mutant.setZoom(Math.round(this._map.getZoom()))}},_resize:function(){var t=this._map.getSize();this._mutantContainer.style.width===t.x&&this._mutantContainer.style.height===t.y||(this.setElementSize(this._mutantContainer,t),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){var t=this._map.getCenter(),e=new google.maps.LatLng(t.lat,t.lng);this._mutant.setCenter(e),this._mutant.setZoom(Math.round(this._map.getZoom()))},_removeTile:function(t){if(this._imagesPerTile>1)for(var e=0;e<this._imagesPerTile;e++){var i=t+"/"+e;i in this._freshTiles&&delete this._freshTiles[i]}else t in this._freshTiles&&delete this._freshTiles[t];return L.GridLayer.prototype._removeTile.call(this,t)}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e){t.exports=i}])});